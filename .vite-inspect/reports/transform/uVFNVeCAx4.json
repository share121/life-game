{"resolvedId":"D:/360MoveData/Users/28546/Desktop/VSCode/ts/life/src/views/HomeView.vue","transforms":[{"name":"vite:load-fallback","result":"<script lang=\"ts\" setup>\nimport { useConfigStore } from '@/stores/config'\nconst { col, row, divWidth, divHeight, updateSpeed, isStart } = storeToRefs(useConfigStore())\nlet map: Ref<boolean[][]> = ref(\n  Array(row.value)\n    .fill([])\n    .map(() => Array(row.value).fill(false))\n)\n\n// 长宽自动调整\nwatch(\n  () => ({\n    col: unref(col),\n    row: unref(row)\n  }),\n  ({ col, row }) => {\n    if (map.value.length > row) {\n      map.value.splice(row - map.value.length)\n    } else if (map.value.length < row) {\n      map.value.push(...Array(row - map.value.length).fill(Array(col).fill(false)))\n    }\n    map.value.forEach((e) => {\n      if (e.length > col) {\n        e.splice(col - e.length)\n      } else if (e.length < col) {\n        e.push(...Array(col - e.length).fill(false))\n      }\n    })\n  }\n)\nfunction* nestArray<T extends any>(...arr: T[][]): IterableIterator<T[]> {\n  if (arr.length === 1) for (const i of arr[0]) yield [i]\n  else {\n    let tempArr: T[][] = []\n    const i = arr[0][0]\n    for (const j of nestArray(...arr.slice(1))) {\n      tempArr.push(j)\n      yield [i, ...j]\n    }\n    for (const i of arr[0].slice(1)) for (const j of tempArr) yield [i, ...j]\n  }\n}\nfunction getBrother<T>(arr: T[][], x: number, y: number) {\n  function get(x: number, y: number) {\n    try {\n      return unref(arr)[y][x]\n    } catch {\n      return\n    }\n  }\n  return [...nestArray([-1, 0, 1], [-1, 0, 1])]\n    .filter(([vx, vy]) => !(vx === 0 && vy === 0))\n    .map(([vx, vy]) => get(x + vx, y + vy))\n}\nwatch(isStart, function t() {\n  if (isStart.value) {\n    const newMap: boolean[][] = Array(row.value)\n      .fill([])\n      .map(() => Array(row.value).fill(false))\n    map.value.forEach((row, y) => {\n      row.forEach((val, x) => {\n        switch (getBrother(map.value, x, y).reduce((pre, cur) => pre + +(cur === true), 0)) {\n          case 2:\n            newMap[y][x] = val\n            break\n          case 3:\n            newMap[y][x] = true\n        }\n      })\n    })\n    map.value = newMap\n    setTimeout(t, unref(updateSpeed))\n  }\n})\n</script>\n\n<template>\n  <div\n    class=\"container\"\n    :style=\"{\n      gridTemplateColumns: `repeat(${col}, auto)`,\n      '--width': divWidth + 'px',\n      '--height': divHeight + 'px'\n    }\"\n  >\n    <template v-for=\"(row, y) in map\">\n      <template v-for=\"(val, x) in row\">\n        <!-- eslint-disable-next-line vue/require-v-for-key -->\n        <div\n          :class=\"{ true: val }\"\n          @mousedown=\"map[y][x] = !map[y][x]\"\n          @mouseover=\"$event.buttons === 1 && (map[y][x] = !map[y][x])\"\n        ></div>\n      </template>\n    </template>\n  </div>\n</template>\n\n<style lang=\"less\" scoped>\n.container {\n  display: grid;\n  place-content: center;\n  gap: 8px;\n  min-height: 100%;\n  min-width: 100%;\n  width: fit-content;\n  & > div {\n    width: var(--width);\n    height: var(--height);\n    border-radius: 8px;\n    background-color: var(--el-fill-color);\n    &.true {\n      background-color: var(--el-text-color-regular);\n      &:hover {\n        background-color: var(--el-text-color-primary);\n      }\n    }\n    transition: all var(--el-transition-duration-fast);\n  }\n}\n</style>\n","start":1680880643259,"end":1680880643497},{"name":"vite:vue","result":"import _sfc_main from \"D:/360MoveData/Users/28546/Desktop/VSCode/ts/life/src/views/HomeView.vue?vue&type=script&setup=true&lang.ts\";\nexport * from \"D:/360MoveData/Users/28546/Desktop/VSCode/ts/life/src/views/HomeView.vue?vue&type=script&setup=true&lang.ts\";\nimport \"D:/360MoveData/Users/28546/Desktop/VSCode/ts/life/src/views/HomeView.vue?vue&type=style&index=0&scoped=07cc02b0&lang.less\";\nimport _export_sfc from \"\\0plugin-vue:export-helper\";\nexport default /* @__PURE__ */ _export_sfc(_sfc_main, [[\"__scopeId\", \"data-v-07cc02b0\"]]);\n","start":1680880643498,"end":1680880643710,"order":"normal"},{"name":"unplugin-vue-components","result":"/* unplugin-vue-components disabled */import _sfc_main from \"D:/360MoveData/Users/28546/Desktop/VSCode/ts/life/src/views/HomeView.vue?vue&type=script&setup=true&lang.ts\";\nexport * from \"D:/360MoveData/Users/28546/Desktop/VSCode/ts/life/src/views/HomeView.vue?vue&type=script&setup=true&lang.ts\";\nimport \"D:/360MoveData/Users/28546/Desktop/VSCode/ts/life/src/views/HomeView.vue?vue&type=style&index=0&scoped=07cc02b0&lang.less\";\nimport _export_sfc from \"\\0plugin-vue:export-helper\";\nexport default /* @__PURE__ */ _export_sfc(_sfc_main, [[\"__scopeId\", \"data-v-07cc02b0\"]]);\n","start":1680880643713,"end":1680880643714,"order":"post"}]}
