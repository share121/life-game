import{d as e,s as t,R as n,S as r,T as o,q as a,F as s,V as u,b as i,W as l,X as f,o as c,Y as d,Z as y}from"../../vendor-22a1e4cb.js";import{u as p}from"../stores/config-7b98a548.js";import{u as x}from"../stores/temp-d05df9d9.js";const m=["data-x","data-y","onMousedown","onMouseover"],h=e({__name:"HomeView",setup(e){const{col:h,row:v,divWidth:b,divHeight:w,updateSpeed:g,enabledTransition:E}=t(p()),{isStart:k}=t(x());let q=n([]);function*M(...e){if(1===e.length)for(const t of e[0])yield[t];else{let t=[];const n=e[0][0];for(const r of M(...e.slice(1)))t.push(r),yield[n,...r];for(const r of e[0].slice(1))for(const e of t)yield[r,...e]}}function j(e,t,n){return[...M([-1,0,1],[-1,0,1])].filter((([e,t])=>!(0===e&&0===t))).map((([r,o])=>{return a=t+r,s=n+o,null!=(u=e.find((e=>e.x===a&&e.y===s)))?u:null;var a,s,u}))}function A(e,t,n){return[...M([-1,0,1],[-1,0,1])].filter((([e,t])=>!(0===e&&0===t))).map((([e,r])=>({x:t+e,y:n+r})))}function F(e,t){return q.find((n=>n.x===e&&n.y===t))}function S(e,t,n=!F(e,t)){!!F(e,t)?n||q.splice(function(e,t){return q.findIndex((n=>n.x===e&&n.y===t))}(e,t),1):n&&q.push({x:e,y:t})}function T(e,t,n=1){return Array(Number((t-e)/n)).fill(e).map(((e,t)=>e+t*n))}r(k,(()=>{if(!k.value)return;let e=performance.now();requestAnimationFrame((function t(n){if(k.value){if(n-e>=g.value){e=n;let t=[],o=[];q.forEach((({x:e,y:t})=>{[{x:e,y:t},...A(0,e,t)].forEach((e=>{o.push(e)}))})),(r=o,r.filter(((e,t,n)=>n.findIndex((t=>y.isEqual(e,t)))===t))).forEach((({x:e,y:n})=>{let r=F(e,n);switch(j(q,e,n).reduce(((e,t)=>e+ +!!t),0)){case 2:break;case 3:r||t.push({x:e,y:n});break;default:r&&t.push({x:e,y:n})}})),t.forEach((({x:e,y:t})=>{S(e,t)}))}var r;requestAnimationFrame(t)}}))}));const _=o((()=>{let e=q.reduce(((e,t)=>t.y>e?t.y:e),v.value-1)+1;return T(q.reduce(((e,t)=>t.y<e?t.y:e),0),e)})),C=o((()=>{let e=q.reduce(((e,t)=>t.x>e?t.x:e),h.value-1)+1;return T(q.reduce(((e,t)=>t.x<e?t.x:e),0),e)}));return(e,t)=>(c(),a("div",{class:"container",style:l({gridTemplateColumns:`repeat(${i(C).length}, auto)`,"--width":i(b)+"px","--height":i(w)+"px"}),onContextmenu:t[0]||(t[0]=f((()=>{}),["prevent"]))},[(c(!0),a(s,null,u(i(_),(e=>(c(),a(s,{key:e},[(c(!0),a(s,null,u(i(C),(t=>(c(),a("div",{key:t,"data-x":t,"data-y":e,class:d({true:F(t,e)}),onMousedown:n=>S(t,e),onMouseover:n=>0!==n.buttons&&S(t,e),style:l(i(E)?{}:{transition:"none"})},null,46,m)))),128))],64)))),128))],36))}});export{h as _};
